language: python
matrix:
  fast_finish: true
  include:
    - python: "2.7"
      env: TOXENV=py27
    - python: "3.4"
      env: TOXENV=py34
    - python: "3.5"
      env: TOXENV=py35
    - python: "3.6"
      env: TOXENV=py36
    - python: pypy
      env: TOXENV=pypy
    - python: pypy3
      env: TOXENV=pypy3
    - python: "3.7"
      env: TOXENV=py37
      dist: xenial
      sudo: true
    - python: 3.6-dev
      env: TOXENV=py36
    - python: 3.7-dev
      env: TOXENV=py37
    - python: "3.6"
      env: TOXENV=lint
    - python: "3.6"
      env: TOXENV=manifest
    - python: "3.7"
      env: TOXENV=dev-dependencies
      dist: xenial
      sudo: true
    - python: "3.7"
      env: TOXENV=snyk
      dist: xenial
      sudo: true
  allow_failures:
    - python: 3.6-dev
    - python: 3.7-dev

install: pip install tox
script:
  - tox
notifications:
  email: false
deploy:
  provider: pypi
  distributions: sdist bdist_wheel
  user: cfarvidson
  password:
    secure: oPaos6QhPdv9m4yJ59NZAoB9cBPDVSv3VxlAW7ZU7BmLMnuldXaHH3uR9k66pXdnPBXecz06FNYU3OFY+4eoSq+McGRSIwrSLP6usqvbW9ZNyDi13xBKq1l+JF7XfRr2XsBEoZPuQX6+M6laxfXSAR4tgtNv+kJ/+a4Ab+NFFeU03MfH6kAnusckqpCURFHfcXYDXolMKf8fmqba6tq54zyIF7vSCOQoGWB4A6C17CL14e+R+/O/+hrOqFt8ymcVTTDHrEmJO5Z0opLqqAQ1mw3ve04uviFH3jw1JUQIbdiG8NR6yMbrCvsCnl6qRa2d7PGFEpjDr1SWKBhHci7D034gYv9uKeqatdZErtUJXfNbBxp67b5EW5/g4SKXkdz2PraTkOVaMpcv8pDhb983AFphIg8ByySsoBdeOGq2SFpv9OBxOiejwjYQU8iSutYtusorteL/1gDnjwsbern2D+y5PeDYiUyxEXUXHL3iM3g9Zya002Fs3K8au+o6x5gWSIVgbTBB0rZwIxgcEAFmleZ6TNIWFQzScu1kVN6W1JUtmSDRM8rmqf+GrmOo8PMrc3EXdZtiRuuO9IJF/Kf7D0U2AClyNAqRPIlZ2WEfEtiniWFlXtb0juLDRS0kzcPHpVt5LzvqEAZbd/rg18ApQS6QEdEOIVPcBAL7PsZ7HSk=
  skip_existing: true
  on:
    tags: true
    repo: cfarvidson/git-open
    python: 3.7
    condition: "$TOXENV = dev-dependencies"
